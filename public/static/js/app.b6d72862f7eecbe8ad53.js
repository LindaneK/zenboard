webpackJsonp([0],{"+Y6S":function(t,e,a){"use strict";var n=a("IN6T"),o={inserted:function(t){t.focus()}};e.a={name:"draft-card",props:["rowId","colId","numCards"],directives:{focus:o},data:function(){return{label:""}},methods:{onInput:function(t){this.label=t.target.innerText},onCancel:function(t){console.log("onCancel",this.rowId,this.colId);var e=this.rowId,a=this.colId,o={rowId:e,colId:a};n.a.$emit("draft-card-cancel",o)},onSave:function(t){if(this.label){var e={label:this.label,rowId:this.rowId,colId:this.colId,myOrder:this.numCards+1};n.a.$emit("draft-card-save",e)}else this.onCancel()}},mounted:function(){var t=this;n.a.$on("global-cancel",function(e){console.log("draft-card:global-cancel"),t.onCancel()})}}},"/s+A":function(t,e){},"5lw2":function(t,e,a){"use strict";function n(t){a("iYrD")}var o=a("+Y6S"),r=a("ip8y"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-9f7c6524",null);e.a=i.exports},"60jW":function(t,e,a){"use strict";function n(t){a("/s+A")}var o=a("OFfM"),r=a("wBk7"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-20493dc6",null);e.a=i.exports},"7JPt":function(t,e){},"7yRs":function(t,e){},"83qt":function(t,e){},"8Wsr":function(t,e,a){"use strict";var n=a("DAYN"),o=a.n(n),r=a("rhdv"),c=a("5lw2");e.a={name:"cell",props:["cell","rowId","hasDraftCard"],components:{draggable:o.a,card:r.a,draftCard:c.a},computed:{dragOptions:function(){return{group:"cards",ghostClass:"ghost",disabled:this.contentEditable}}},methods:{onEnd:function(t){console.log("End (drag)"),this.$emit("card-drag-end",{id:t.clone.dataset.cardId,rowId:t.to.dataset.rowId,colId:t.to.dataset.colId,myOrder:t.newIndex+1})},onUpdate:function(){},onChange:function(){},onMove:function(){},onSort:function(){return!0}}}},"8a40":function(t,e,a){"use strict";function n(t){a("pQSr")}var o=a("Sz/U"),r=a("Me3T"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-a1c706fa",null);e.a=i.exports},"93UE":function(t,e,a){"use strict";function n(t){a("H/Lp")}var o=a("mpyD"),r=a("WNe8"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-74b21e2d",null);e.a=i.exports},B1Az:function(t,e,a){"use strict";function n(t){a("7yRs")}var o=a("8Wsr"),r=a("toyE"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-60b09fdc",null);e.a=i.exports},E8Ei:function(t,e,a){"use strict";var n=a("IN6T");e.a={name:"masthead",methods:{onAddCard:function(){n.a.$emit("masthead-add-card",!0)},onAddRow:function(){n.a.$emit("row-edit-details","new-row")}}}},FMuL:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("masthead"),t._v(" "),a("table",{staticClass:"main",on:{keyup:[function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key))&&e.ctrlKey?void t.onSave(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onCancel(e)}]}},[t._m(0),t._v(" "),t._l(t.rows,function(e){return a("row",{key:"row.id",attrs:{row:e},on:{"card-drag-end":t.cardDragEnd}})})],2),t._v(" "),0===t.rows.length?a("div",{staticClass:"no-rows"},[t._v('To create a row, click the "+ Add row" button')]):t._e(),t._v(" "),a("cardEditor"),t._v(" "),a("row-editor")],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"cell-0"}),t._v(" "),a("th",{staticClass:"col col-todo"},[t._v("To do\n      ")]),t._v(" "),a("th",{staticClass:"col col-blocked"},[t._v("Blocked")]),t._v(" "),a("th",{staticClass:"col col-inprogress"},[t._v("In progress\n      ")]),t._v(" "),a("th",{staticClass:"col col-done"},[t._v("Done "),a("span",{staticClass:"fa fa-check-circle"})])])}],r={render:n,staticRenderFns:o};e.a=r},"H/Lp":function(t,e){},IN6T:function(t,e,a){"use strict";var n=a("7+uW"),o=new n.a;e.a=o},Kz3E:function(t,e,a){"use strict";function n(t){a("rvul")}var o=a("E8Ei"),r=a("grdh"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-c7619680",null);e.a=i.exports},L4wH:function(t,e,a){"use strict";var n=a("93UE");e.a={name:"archive",props:["archivedRows"],components:{row:n.a}}},LYzt:function(t,e,a){"use strict";var n=a("7+uW"),o=a("Kz3E"),r=a("93UE"),c=a("8a40"),s=a("60jW"),i=a("QfD2"),d=a("IN6T"),l=a("hMcO"),u=a.n(l),v=window.location.origin;n.a.use(u.a,v),e.a={name:"board",components:{masthead:o.a,row:r.a,cardEditor:c.a,RowEditor:s.a,Archive:i.a},data:function(){return{rows:[],archivedRows:[]}},sockets:{connect:function(){console.log("socket connected")},customEmit:function(t){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')},boardRefresh:function(t){console.log("boardRefresh",t),this.rows=t}},watch:{rows:function(t){console.log(t)},archivedRows:function(t){console.log("watched",t)}},created:function(){var t=this;fetch("/api/rows/deep").then(function(e){if(!e.ok)throw new Error(e.statusText);e.json().then(function(e){t.rows=e,t.initArchive()})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)})},methods:{cardDragEnd:function(t){console.log("board:card-drag-end",t),this.$socket.emit("task:move",t)},onCancel:function(t){console.log("board:onCancel"),d.a.$emit("global-cancel",!0)},onSave:function(t){},initArchive:function(){var t=this;fetch("/api/archive/rows/deep").then(function(e){if(200!==e.status)throw Error(e.statusText);e.json().then(function(e){t.archivedRows=e,console.log("Archive",e)})}).catch(function(t){console.error(t),alert("Couldn't load archive\n\n"+t)})}},mounted:function(){var t=this;d.a.$on("rows-refreshed",function(e){console.log("board:rows-refreshed"),t.rows=e}),d.a.$on("draft-card-save",function(t){console.log("draft-card-save",t),this.$socket.emit("task:create",t)})}}},M93x:function(t,e,a){"use strict";function n(t){a("7JPt")}var o=a("xJD8"),r=a("qZDX"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,null,null);e.a=i.exports},Me3T:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.card?a("div",{staticClass:"template-task-details template-modal",on:{click:t.onCancelIfClickOutside}},[a("div",{staticClass:"task-details-content modal-content",on:{keyup:[function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key))&&e.ctrlKey?void t.onSave(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onCancel(e)}]}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.label,expression:"card.label"},{name:"focus",rawName:"v-focus"}],staticClass:"tdc-label form-label",attrs:{type:"text",name:"label"},domProps:{value:t.card.label},on:{input:function(e){e.target.composing||t.$set(t.card,"label",e.target.value)}}})]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.card.description,expression:"card.description"}],staticClass:"tdc-description form-textarea",attrs:{name:"description"},domProps:{value:t.card.description},on:{input:function(e){e.target.composing||t.$set(t.card,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"modal-buttons tdc-buttons"},[a("input",{staticClass:"modal-btn modal-cancel tdc-button-cancel",attrs:{type:"button",value:"Cancel",title:"[Esc]"},on:{click:t.onCancel}}),t._v(" "),a("span",{staticClass:"tdc-archive"},[t._v("Archive "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.isArchived,expression:"card.isArchived"}],staticClass:"tdc-archive form-archive",attrs:{type:"checkbox",name:"archive"},domProps:{checked:Array.isArray(t.card.isArchived)?t._i(t.card.isArchived,null)>-1:t.card.isArchived},on:{change:function(e){var a=t.card.isArchived,n=e.target,o=!!n.checked;if(Array.isArray(a)){var r=t._i(a,null);n.checked?r<0&&(t.card.isArchived=a.concat([null])):r>-1&&(t.card.isArchived=a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.card,"isArchived",o)}}})]),t._v(" "),a("input",{staticClass:"modal-btn modal-save tdc-button-save",attrs:{type:"button",value:"Save",title:"[CMD + Enter]"},on:{click:t.onSave}})])])]):t._e()},o=[],r={render:n,staticRenderFns:o};e.a=r},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o=a("M93x");n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:o.a}})},NU23:function(t,e,a){"use strict";var n=a("IN6T");e.a={name:"card",props:["card"],methods:{editDetails:function(){console.log("editDetails"),n.a.$emit("card-edit-details",this.card.id)}},computed:{isUrgent:function(){return this.card.label.indexOf("!!")>0},filteredLabel:function(){return this.card.label}}}},OFfM:function(t,e,a){"use strict";var n=a("mvHQ"),o=a.n(n),r=a("IN6T"),c={inserted:function(t){t.focus()}};e.a={name:"row-editor",directives:{focus:c},data:function(){return{row:!1,allRows:[]}},mounted:function(){var t=this;r.a.$on("row-edit-details",function(e){console.log("Edit row",e),"new-row"===e?t.row={isNew:!0,my_order:1,isArchived:!1}:fetch("/api/rows/"+e).then(function(e){e.json().then(function(e){t.row=e,e.isArchived=e.is_archived,console.log(e),t.row.originalPosition=e.my_order})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)}),fetch("/api/rows/").then(function(e){e.json().then(function(e){t.allRows=e})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)})}),r.a.$on("global-cancel",function(){t.onCancel()}),r.a.$on("global-save-row",function(){t.onSave()})},methods:{onCancel:function(){this.row=!1},onCancelIfClickOutside:function(t){t.srcElement.classList.contains("template-modal")&&r.a.$emit("global-cancel",t)},onSave:function(){console.log("About to save row...");var t=this;console.log("api url",""),fetch("/api/rows/save",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:o()(this.row)}).then(function(e){if(!e.ok)throw Error(e.statusText);console.log("Card saved"),t.row=!1}).catch(function(t){return alert("Sorry, something went wrong\n\n"+t)})},handleCmdEnter:function(t){console.log(t),(t.metaKey||t.ctrlKey)&&t.keyCode}}}},QLzz:function(t,e){},QfD2:function(t,e,a){"use strict";function n(t){a("gpU2")}var o=a("L4wH"),r=a("jdO0"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-10e5d6e0",null);e.a=i.exports},"Sz/U":function(t,e,a){"use strict";var n=a("mvHQ"),o=a.n(n),r=a("IN6T"),c={inserted:function(t){t.focus()}};e.a={name:"cardEditor",directives:{focus:c},data:function(){return{card:!1}},mounted:function(){var t=this;r.a.$on("card-edit-details",function(e){console.log("Edit card",e),fetch("/api/cards/"+e).then(function(e){e.json().then(function(e){t.card=e})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)})}),r.a.$on("global-cancel",function(){t.onCancel()}),r.a.$on("global-save-card",function(){t.onSave()})},methods:{onCancel:function(){this.card=!1},onCancelIfClickOutside:function(t){t.srcElement.classList.contains("template-modal")&&r.a.$emit("global-cancel",t)},onSave:function(){if(console.log("About to save card...",this.card),!1===this.card)console.log("Card modal has no card to save");else{this.card.timestamp=(new Date).getTime();var t=this;console.log("api url",""),fetch("/api/cards/save",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:o()(this.card)}).then(function(e){if(!e.ok)throw Error(e.statusText);console.log("Card saved"),t.card=!1}).catch(function(t){return alert("Sorry, something went wrong\n\n"+t)})}},handleCmdEnter:function(t){console.log(t),(t.metaKey||t.ctrlKey)&&13===t.keyCode&&this.onSave()}}}},TUcH:function(t,e,a){"use strict";function n(t){a("83qt")}var o=a("LYzt"),r=a("FMuL"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-0054a695",null);e.a=i.exports},WNe8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"plain-bg",on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[a("th",{staticClass:"row-heading-cell"},[a("div",{staticClass:"row-label",on:{click:t.onClick}},[t._v(t._s(t.row.label))]),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.hover?a("div",{staticClass:"btn-task-new",attrs:{disabled:"hasDraftCard"},on:{click:t.addDraftCard}},[t._v("+ Add card")]):t._e()])],1),t._v(" "),t._l(t.row.cells,function(e,n){return a("cell",{key:t.row.id+","+n,attrs:{cell:e,rowId:t.row.id,hasDraftCard:t.hasDraftCard&&1===e.colId},on:{"card-drag-end":t.cardDragEnd}})})],2)},o=[],r={render:n,staticRenderFns:o};e.a=r},dB65:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:{task:!0,urgent:t.isUrgent},attrs:{"data-card-id":t.card.id,title:"id: "+t.card.id},on:{click:t.editDetails}},[t._v(t._s(t.card.label))])},o=[],r={render:n,staticRenderFns:o};e.a=r},gpU2:function(t,e){},grdh:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"masthead"},[a("div",{staticClass:"heading"},[t._v("\n        Acme Dev Team\n    ")]),t._v(" "),a("div",{staticClass:"nav"},[a("span",{staticClass:"nav-item nav-row-new",on:{click:t.onAddRow}},[t._v("+ Add row")]),t._v(" "),a("span",{staticClass:"nav-item nav-task-new action-task-new",on:{click:t.onAddCard}},[t._v("+ Add card")])])])},o=[],r={render:n,staticRenderFns:o};e.a=r},iYrD:function(t,e){},ip8y:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"draft-card-wrapper",on:{keyup:function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key))&&e.ctrlKey?void t.onSave(e):null}}},[a("div",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"task-new",attrs:{contenteditable:!0},on:{input:t.onInput}}),t._v(" "),a("div",{staticClass:"button-container"},[a("span",{staticClass:"button btn-cancel",attrs:{title:"[Esc]","data-row-id":t.rowId,"data-col-id":t.colId},on:{click:t.onCancel}},[t._v("Cancel")]),t._v(" "),a("span",{staticClass:"button btn-save",attrs:{title:"[CTRL + Enter]"},on:{click:t.onSave}},[t._v("Save")])])])},o=[],r={render:n,staticRenderFns:o};e.a=r},jdO0:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history-container"},[a("h3",{staticClass:"section-heading"},[t._v("Archived rows")]),t._v(" "),a("table",{staticClass:"history"},[t._m(0),t._v(" "),t._l(t.archivedRows,function(t){return a("row",{key:"row.id",attrs:{row:t}})})],2)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"cell-0"}),t._v(" "),a("th",{staticClass:"history-col"},[t._v("To do\n      ")]),t._v(" "),a("th",{staticClass:"history-col"},[t._v("Blocked")]),t._v(" "),a("th",{staticClass:"history-col"},[t._v("In progress\n      ")]),t._v(" "),a("th",{staticClass:"history-col"},[t._v("Done")])])}],r={render:n,staticRenderFns:o};e.a=r},mpyD:function(t,e,a){"use strict";var n=a("B1Az"),o=a("IN6T");e.a={name:"row",components:{cell:n.a},props:["row"],data:function(){return{hasDraftCard:!1,hover:!1}},methods:{cardDragEnd:function(t){this.$emit("card-drag-end",t)},addDraftCard:function(t){this.hasDraftCard=!0},removeDraftCards:function(t){this.hasDraftCard=!1},onClick:function(){console.log("onClick"),o.a.$emit("row-edit-details",this.row.id)}},mounted:function(){var t=this;o.a.$on("draft-card-cancel",function(e){e.rowId.toString()===t.row.id.toString()&&t.removeDraftCards(e)}),o.a.$on("draft-card-save",function(e){e.rowId===t.row.id&&(t.hasDraftCard=!1)}),o.a.$on("masthead-add-card",function(){console.log("masthead-add-card"),1===t.row.position&&(t.hasDraftCard=!0)})}}},pQSr:function(t,e){},qZDX:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("board"),t._v(" "),t._m(0)],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",[a("a",{attrs:{href:"https://github.com/matthumphreys/zenboard"}},[a("span",{staticClass:"footer-dark"},[t._v("Zen")]),a("span",{staticClass:"footer-light"},[t._v("board")])])])}],r={render:n,staticRenderFns:o};e.a=r},rhdv:function(t,e,a){"use strict";function n(t){a("QLzz")}var o=a("NU23"),r=a("dB65"),c=a("VU/8"),s=n,i=c(o.a,r.a,!1,s,"data-v-5dce0f14",null);e.a=i.exports},rvul:function(t,e){},toyE:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("draggable",{staticClass:"drag-area",attrs:{element:"td",list:t.cell.cards,options:t.dragOptions,"data-col-id":t.cell.colId,"data-row-id":t.rowId},on:{end:t.onEnd,update:t.onUpdate,change:t.onChange,sort:t.onSort}},[t._l(t.cell.cards,function(t){return a("card",{key:"card.id",attrs:{card:t}})}),t._v(" "),t.hasDraftCard?a("draft-card",{attrs:{rowId:t.rowId,colId:t.cell.colId,numCards:t.cell.cards.length}}):t._e()],2)},o=[],r={render:n,staticRenderFns:o};e.a=r},wBk7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.row?a("div",{staticClass:"template-task-details template-modal",on:{click:t.onCancelIfClickOutside}},[a("div",{staticClass:"task-details-content modal-content",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onCancel(e)}}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.label,expression:"row.label"},{name:"focus",rawName:"v-focus"}],staticClass:"tdc-label form-label",attrs:{type:"text",name:"label",placeholder:t.row.isNew?"New row":"Label"},domProps:{value:t.row.label},on:{input:function(e){e.target.composing||t.$set(t.row,"label",e.target.value)}}})]),t._v(" "),t.allRows.length?a("div",{staticClass:"tdc-position"},[t._v("\n      Position "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.row.my_order,expression:"row.my_order"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.row,"my_order",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:1}},[t._v("1 (top)")]),t._v(" "),t._l(t.allRows,function(e){return a("option",{domProps:{value:e.my_order+1}},[t._v(t._s(e.my_order+1)+" (after "+t._s(e.label)+")")])})],2)]):t._e(),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.info,expression:"row.info"}],staticClass:"tdc-description form-textarea",attrs:{name:"description"},domProps:{value:t.row.info},on:{input:function(e){e.target.composing||t.$set(t.row,"info",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"modal-buttons tdc-buttons"},[a("input",{staticClass:"modal-btn modal-cancel tdc-button-cancel",attrs:{type:"button",value:"Cancel",title:"[Esc]"},on:{click:t.onCancel}}),t._v(" "),a("span",{staticClass:"tdc-archive"},[t._v("Archive "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.isArchived,expression:"row.isArchived"}],staticClass:"tdc-archive form-archive",attrs:{type:"checkbox",name:"archive"},domProps:{checked:Array.isArray(t.row.isArchived)?t._i(t.row.isArchived,null)>-1:t.row.isArchived},on:{change:function(e){var a=t.row.isArchived,n=e.target,o=!!n.checked;if(Array.isArray(a)){var r=t._i(a,null);n.checked?r<0&&(t.row.isArchived=a.concat([null])):r>-1&&(t.row.isArchived=a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.row,"isArchived",o)}}})]),t._v(" "),a("input",{staticClass:"modal-btn modal-save tdc-button-save",attrs:{type:"button",value:"Save",title:"[CMD + Enter]"},on:{click:t.onSave}})])])]):t._e()},o=[],r={render:n,staticRenderFns:o};e.a=r},xJD8:function(t,e,a){"use strict";var n=a("TUcH");e.a={name:"app",components:{board:n.a}}}},["NHnr"]);
//# sourceMappingURL=app.b6d72862f7eecbe8ad53.js.map