webpackJsonp([0],{"+Y6S":function(t,e,n){"use strict";var a=n("IN6T"),o={inserted:function(t){t.focus()}};e.a={name:"draft-card",props:["rowId","colId","numCards"],directives:{focus:o},data:function(){return{label:""}},methods:{onInput:function(t){this.label=t.target.innerText},onCancel:function(t){var e=t.srcElement,n=e.dataset.rowId,o=e.dataset.colId,r={rowId:n,colId:o};a.a.$emit("draft-card-cancel",r)},onSave:function(t){var e={label:this.label,rowId:this.rowId,colId:this.colId,myOrder:this.numCards+1};a.a.$emit("draft-card-save",e)}}}},"/x6H":function(t,e){},"5lw2":function(t,e,n){"use strict";function a(t){n("De8N")}var o=n("+Y6S"),r=n("l0fN"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-ccbca306",null);e.a=i.exports},"60jW":function(t,e,n){"use strict";function a(t){n("YjqS")}var o=n("OFfM"),r=n("joHy"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-73fdfa58",null);e.a=i.exports},"7yRs":function(t,e){},"8Wsr":function(t,e,n){"use strict";var a=n("DAYN"),o=n.n(a),r=n("rhdv"),c=n("5lw2");e.a={name:"cell",props:["cell","rowId","hasDraftCard"],components:{draggable:o.a,card:r.a,draftCard:c.a},computed:{dragOptions:function(){return{group:"cards",ghostClass:"ghost",disabled:this.contentEditable}}},methods:{onEnd:function(t){console.log("End (drag)"),this.$emit("card-drag-end",{id:t.clone.dataset.cardId,rowId:t.to.dataset.rowId,colId:t.to.dataset.colId,myOrder:t.newIndex+1})},onUpdate:function(){},onChange:function(){},onMove:function(){},onSort:function(){return!0}}}},"8a40":function(t,e,n){"use strict";function a(t){n("mxqS")}var o=n("Sz/U"),r=n("Az9f"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-aceef65a",null);e.a=i.exports},"93UE":function(t,e,n){"use strict";function a(t){n("yKWn")}var o=n("mpyD"),r=n("bhJU"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-bb01a08c",null);e.a=i.exports},"9mOu":function(t,e){},Az9f:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.card?n("div",{staticClass:"template-task-details template-modal",on:{click:t.onCancelIfClickOutside}},[n("div",{staticClass:"task-details-content modal-content",on:{keyup:[function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key))&&e.ctrlKey?void t.onSave(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onCancel(e)}]}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.card.label,expression:"card.label"},{name:"focus",rawName:"v-focus"}],staticClass:"tdc-label form-label",attrs:{type:"text",name:"label"},domProps:{value:t.card.label},on:{input:function(e){e.target.composing||t.$set(t.card,"label",e.target.value)}}})]),t._v(" "),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.card.description,expression:"card.description"}],staticClass:"tdc-description form-textarea",attrs:{name:"description"},domProps:{value:t.card.description},on:{input:function(e){e.target.composing||t.$set(t.card,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"modal-buttons tdc-buttons"},[n("input",{staticClass:"modal-btn modal-cancel tdc-button-cancel",attrs:{type:"button",value:"Cancel",title:"[Esc]"},on:{click:t.onCancel}}),t._v(" "),n("span",{staticClass:"tdc-archive"},[t._v("Archive "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.card.isArchived,expression:"card.isArchived"}],staticClass:"tdc-archive form-archive",attrs:{type:"checkbox",name:"archive"},domProps:{checked:Array.isArray(t.card.isArchived)?t._i(t.card.isArchived,null)>-1:t.card.isArchived},on:{change:function(e){var n=t.card.isArchived,a=e.target,o=!!a.checked;if(Array.isArray(n)){var r=t._i(n,null);a.checked?r<0&&(t.card.isArchived=n.concat([null])):r>-1&&(t.card.isArchived=n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.card,"isArchived",o)}}})]),t._v(" "),n("input",{staticClass:"modal-btn modal-save tdc-button-save",attrs:{type:"button",value:"Save",title:"[CMD + Enter]"},on:{click:t.onSave}})])])]):t._e()},o=[],r={render:a,staticRenderFns:o};e.a=r},B1Az:function(t,e,n){"use strict";function a(t){n("7yRs")}var o=n("8Wsr"),r=n("toyE"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-60b09fdc",null);e.a=i.exports},De8N:function(t,e){},E8Ei:function(t,e,n){"use strict";var a=n("IN6T");e.a={name:"masthead",methods:{onAddCard:function(){a.a.$emit("masthead-add-card",!0)},onAddRow:function(){a.a.$emit("row-edit-details","new-row")}}}},IN6T:function(t,e,n){"use strict";var a=n("7+uW"),o=new a.a;e.a=o},IZ7Q:function(t,e){},Kz3E:function(t,e,n){"use strict";function a(t){n("IZ7Q")}var o=n("E8Ei"),r=n("vloe"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-354cdd28",null);e.a=i.exports},L4wH:function(t,e,n){"use strict";var a=n("93UE");e.a={name:"archive",props:["archivedRows"],components:{row:a.a}}},LYzt:function(t,e,n){"use strict";var a=n("7+uW"),o=n("Kz3E"),r=n("93UE"),c=n("8a40"),s=n("60jW"),i=n("QfD2"),d=n("IN6T"),l=n("hMcO"),u=n.n(l),v=window.location.origin;a.a.use(u.a,v),e.a={name:"board",components:{masthead:o.a,row:r.a,cardEditor:c.a,RowEditor:s.a,Archive:i.a},data:function(){return{rows:[],archivedRows:[]}},sockets:{connect:function(){console.log("socket connected")},customEmit:function(t){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')},boardRefresh:function(t){console.log("boardRefresh",t),this.rows=t}},watch:{rows:function(t){console.log(t)},archivedRows:function(t){console.log("watched",t)}},created:function(){var t=this;fetch("/api/rows/deep").then(function(e){e.json().then(function(e){t.rows=e,t.initArchive()})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)})},methods:{cardDragEnd:function(t){console.log("board:card-drag-end",t),this.$socket.emit("task:move",t)},onCancel:function(t){console.log("board:onCancel"),d.a.$emit("global-cancel",!0)},onSave:function(t){console.log("board:onSave"),d.a.$emit("global-save",!0)},initArchive:function(){var t=this;fetch("/api/archive/rows/deep").then(function(e){if(200!==e.status)throw Error(e.statusText);e.json().then(function(e){t.archivedRows=e,console.log("Archive",e)})}).catch(function(t){console.error(t),alert("Couldn't load archive\n\n"+t)})}},mounted:function(){var t=this;d.a.$on("rows-refreshed",function(e){console.log("board:rows-refreshed"),t.rows=e}),d.a.$on("draft-card-save",function(t){console.log("draft-card-save",t),this.$socket.emit("task:create",t)})}}},M93x:function(t,e,n){"use strict";function a(t){n("Py8g")}var o=n("xJD8"),r=n("wQnn"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,null,null);e.a=i.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o=n("M93x");a.a.config.productionTip=!1,new a.a({el:"#app",template:"<App/>",components:{App:o.a}})},NU23:function(t,e,n){"use strict";var a=n("IN6T");e.a={name:"card",props:["card"],methods:{editDetails:function(){console.log("editDetails"),a.a.$emit("card-edit-details",this.card.id)}},computed:{isUrgent:function(){return this.card.label.indexOf("!!")>0},filteredLabel:function(){return this.card.label}}}},OFfM:function(t,e,n){"use strict";var a=n("mvHQ"),o=n.n(a),r=n("IN6T"),c={inserted:function(t){t.focus()}};e.a={name:"row-editor",directives:{focus:c},data:function(){return{row:!1,allRows:[]}},mounted:function(){var t=this;r.a.$on("row-edit-details",function(e){console.log("Edit row",e),"new-row"===e?t.row={isNew:!0,my_order:1}:fetch("/api/rows/"+e).then(function(e){e.json().then(function(e){t.row=e,e.isArchived=e.is_archived,console.log(e),t.row.originalPosition=e.my_order})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)}),fetch("/api/rows/").then(function(e){e.json().then(function(e){t.allRows=e})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)})}),r.a.$on("global-cancel",function(){t.onCancel()}),r.a.$on("global-save",function(){t.onSave()})},methods:{onCancel:function(){this.row=!1},onCancelIfClickOutside:function(t){t.srcElement.classList.contains("template-modal")&&r.a.$emit("global-cancel",t)},onSave:function(){console.log("About to save row...");var t=this;console.log("api url",""),fetch("/api/rows/save",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:o()(this.row)}).then(function(e){if(!e.ok)throw Error(e.statusText);console.log("Card saved"),t.row=!1}).catch(function(t){return alert("Sorry, something went wrong\n\n"+t)})},handleCmdEnter:function(t){console.log(t),(t.metaKey||t.ctrlKey)&&13===t.keyCode&&this.onSave()}}}},P12C:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("masthead"),t._v(" "),n("table",{staticClass:"main",on:{keyup:[function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key))&&e.ctrlKey?void t.onSave(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onCancel(e)}]}},[t._m(0),t._v(" "),t._l(t.rows,function(e){return n("row",{key:"row.id",attrs:{row:e},on:{"card-drag-end":t.cardDragEnd}})})],2),t._v(" "),n("cardEditor"),t._v(" "),n("row-editor")],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{staticClass:"cell-0"}),t._v(" "),n("th",{staticClass:"col col-todo"},[t._v("To do\n      ")]),t._v(" "),n("th",{staticClass:"col col-blocked"},[t._v("Blocked")]),t._v(" "),n("th",{staticClass:"col col-inprogress"},[t._v("In progress\n      ")]),t._v(" "),n("th",{staticClass:"col col-done"},[t._v("Done "),n("span",{staticClass:"fa fa-check-circle"})])])}],r={render:a,staticRenderFns:o};e.a=r},Py8g:function(t,e){},QfD2:function(t,e,n){"use strict";function a(t){n("gpU2")}var o=n("L4wH"),r=n("jdO0"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-10e5d6e0",null);e.a=i.exports},"Sz/U":function(t,e,n){"use strict";var a=n("mvHQ"),o=n.n(a),r=n("IN6T"),c={inserted:function(t){t.focus()}};e.a={name:"cardEditor",directives:{focus:c},data:function(){return{card:!1}},mounted:function(){var t=this;r.a.$on("card-edit-details",function(e){console.log("Edit card",e),fetch("/api/cards/"+e).then(function(e){e.json().then(function(e){t.card=e})}).catch(function(t){console.error(t),alert("Sorry, something went wrong\n\n"+t)})}),r.a.$on("global-cancel",function(){t.onCancel()}),r.a.$on("global-save",function(){t.onSave()})},methods:{onCancel:function(){this.card=!1},onCancelIfClickOutside:function(t){t.srcElement.classList.contains("template-modal")&&r.a.$emit("global-cancel",t)},onSave:function(){console.log("About to save card..."),this.card.timestamp=(new Date).getTime();var t=this;console.log("api url",""),fetch("/api/cards/save",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:o()(this.card)}).then(function(e){if(!e.ok)throw Error(e.statusText);console.log("Card saved"),t.card=!1}).catch(function(t){return alert("Sorry, something went wrong\n\n"+t)})},handleCmdEnter:function(t){console.log(t),(t.metaKey||t.ctrlKey)&&13===t.keyCode&&this.onSave()}}}},TUcH:function(t,e,n){"use strict";function a(t){n("9mOu")}var o=n("LYzt"),r=n("P12C"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-dbb6ca94",null);e.a=i.exports},YjqS:function(t,e){},bhJU:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"plain-bg",on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[n("th",{staticClass:"row-heading-cell"},[n("div",{staticClass:"row-label",on:{click:t.onClick}},[t._v(t._s(t.row.label))]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.hover?n("div",{staticClass:"btn-task-new",attrs:{disabled:"hasDraftCard"},on:{click:t.addDraftCard}},[t._v("+ Add card")]):t._e()])],1),t._v(" "),t._l(t.row.cells,function(e,a){return n("cell",{key:t.row.id+","+a,attrs:{cell:e,rowId:t.row.id,hasDraftCard:t.hasDraftCard&&1===e.colId},on:{"card-drag-end":t.cardDragEnd}})})],2)},o=[],r={render:a,staticRenderFns:o};e.a=r},gpU2:function(t,e){},jdO0:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"history-container"},[n("h3",{staticClass:"section-heading"},[t._v("Archived rows")]),t._v(" "),n("table",{staticClass:"history"},[t._m(0),t._v(" "),t._l(t.archivedRows,function(t){return n("row",{key:"row.id",attrs:{row:t}})})],2)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{staticClass:"cell-0"}),t._v(" "),n("th",{staticClass:"history-col"},[t._v("To do\n      ")]),t._v(" "),n("th",{staticClass:"history-col"},[t._v("Blocked")]),t._v(" "),n("th",{staticClass:"history-col"},[t._v("In progress\n      ")]),t._v(" "),n("th",{staticClass:"history-col"},[t._v("Done")])])}],r={render:a,staticRenderFns:o};e.a=r},joHy:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.row?n("div",{staticClass:"template-task-details template-modal",on:{click:t.onCancelIfClickOutside}},[n("div",{staticClass:"task-details-content modal-content",on:{keyup:[function(e){return("button"in e||!t._k(e.keyCode,"enter",13,e.key))&&e.ctrlKey?void t.onSave(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onCancel(e)}]}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.row.label,expression:"row.label"},{name:"focus",rawName:"v-focus"}],staticClass:"tdc-label form-label",attrs:{type:"text",name:"label",placeholder:t.row.isNew?"New row":"Label"},domProps:{value:t.row.label},on:{input:function(e){e.target.composing||t.$set(t.row,"label",e.target.value)}}})]),t._v(" "),t.allRows.length?n("div",{staticClass:"tdc-position"},[t._v("\n      Position "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.row.my_order,expression:"row.my_order"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.row,"my_order",e.target.multiple?n:n[0])}}},[n("option",{domProps:{value:1}},[t._v("1 (top)")]),t._v(" "),t._l(t.allRows,function(e){return n("option",{domProps:{value:e.my_order+1}},[t._v(t._s(e.my_order+1)+" (after "+t._s(e.label)+")")])})],2)]):t._e(),t._v(" "),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.info,expression:"row.info"}],staticClass:"tdc-description form-textarea",attrs:{name:"description"},domProps:{value:t.row.info},on:{input:function(e){e.target.composing||t.$set(t.row,"info",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"modal-buttons tdc-buttons"},[n("input",{staticClass:"modal-btn modal-cancel tdc-button-cancel",attrs:{type:"button",value:"Cancel",title:"[Esc]"},on:{click:t.onCancel}}),t._v(" "),n("span",{staticClass:"tdc-archive"},[t._v("Archive "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.row.isArchived,expression:"row.isArchived"}],staticClass:"tdc-archive form-archive",attrs:{type:"checkbox",name:"archive"},domProps:{checked:Array.isArray(t.row.isArchived)?t._i(t.row.isArchived,null)>-1:t.row.isArchived},on:{change:function(e){var n=t.row.isArchived,a=e.target,o=!!a.checked;if(Array.isArray(n)){var r=t._i(n,null);a.checked?r<0&&(t.row.isArchived=n.concat([null])):r>-1&&(t.row.isArchived=n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.row,"isArchived",o)}}})]),t._v(" "),n("input",{staticClass:"modal-btn modal-save tdc-button-save",attrs:{type:"button",value:"Save",title:"[CMD + Enter]"},on:{click:t.onSave}})])])]):t._e()},o=[],r={render:a,staticRenderFns:o};e.a=r},l0fN:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"draft-card-wrapper"},[n("div",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"task-new",attrs:{contenteditable:!0},on:{input:t.onInput}}),t._v(" "),n("div",{staticClass:"button-container"},[n("span",{staticClass:"button btn-cancel",attrs:{title:"[Esc]","data-row-id":t.rowId,"data-col-id":t.colId},on:{click:t.onCancel}},[t._v("Cancel")]),t._v(" "),n("span",{staticClass:"button btn-save",attrs:{title:"[CTRL + Enter]"},on:{click:t.onSave}},[t._v("Save")])])])},o=[],r={render:a,staticRenderFns:o};e.a=r},mpyD:function(t,e,n){"use strict";var a=n("B1Az"),o=n("IN6T");e.a={name:"row",components:{cell:a.a},props:["row"],data:function(){return{hasDraftCard:!1,hover:!1}},methods:{cardDragEnd:function(t){this.$emit("card-drag-end",t)},addDraftCard:function(t){this.hasDraftCard=!0},removeDraftCards:function(t){this.hasDraftCard=!1},onClick:function(){console.log("onClick"),o.a.$emit("row-edit-details",this.row.id)}},mounted:function(){var t=this;o.a.$on("draft-card-cancel",function(e){e.rowId===t.row.id.toString()&&t.removeDraftCards(e)}),o.a.$on("draft-card-save",function(e){e.rowId===t.row.id&&(t.hasDraftCard=!1)}),o.a.$on("masthead-add-card",function(){console.log("masthead-add-card"),1===t.row.position&&(t.hasDraftCard=!0)})}}},mxqS:function(t,e){},piu7:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:{task:!0,urgent:t.isUrgent},attrs:{"data-card-id":t.card.id},on:{click:t.editDetails}},[t._v(t._s(t.card.label))])},o=[],r={render:a,staticRenderFns:o};e.a=r},rhdv:function(t,e,n){"use strict";function a(t){n("/x6H")}var o=n("NU23"),r=n("piu7"),c=n("VU/8"),s=a,i=c(o.a,r.a,!1,s,"data-v-d85c4a74",null);e.a=i.exports},toyE:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("draggable",{staticClass:"drag-area",attrs:{element:"td",list:t.cell.cards,options:t.dragOptions,"data-col-id":t.cell.colId,"data-row-id":t.rowId},on:{end:t.onEnd,update:t.onUpdate,change:t.onChange,sort:t.onSort}},[t._l(t.cell.cards,function(t){return n("card",{key:"card.id",attrs:{card:t}})}),t._v(" "),t.hasDraftCard?n("draft-card",{attrs:{rowId:t.rowId,colId:t.cell.colId,numCards:t.cell.cards.length}}):t._e()],2)},o=[],r={render:a,staticRenderFns:o};e.a=r},vloe:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"masthead"},[n("div",{staticClass:"heading"},[t._v("\n        Acme Dev Team\n    ")]),t._v(" "),n("div",{staticClass:"nav"},[n("span",{staticClass:"nav-item nav-row-new",on:{click:t.onAddRow}},[t._v("+ Add row")]),t._v(" "),n("span",{staticClass:"nav-item nav-task-new action-task-new",on:{click:t.onAddCard}},[t._v("+ Add card")])])])},o=[],r={render:a,staticRenderFns:o};e.a=r},wQnn:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("board")],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},xJD8:function(t,e,n){"use strict";var a=n("TUcH");e.a={name:"app",components:{board:a.a}}},yKWn:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9428edb954d3c96fba05.js.map